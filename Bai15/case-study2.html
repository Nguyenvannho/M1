<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<style>
    h1 {
        color: blue;
    }

    #box {
        background-color: black;
        height: 100px;
    }

    h2 {
        color: red;
    }

    input {
        color: red;
    }

    h4 {
        color: blueviolet;
    }
</style>

<body>
    <h3>
        <a href="https://www.facebook.com/profile.php?id=100023998868297">
            facebook
        </a>
    </h3>
    <h4>
        QUẢN LÝ SẢN PHẨM
    </h4>

    <form>
        <h1 style="text-align: center " ;><b>*SHOP APPLE</b><img style="width:25px; height: 20px" src="./apple_logo.jpg"
                alt=""></h1>
        <input input type="text" type="text" placeholder="tên sản phẩm" id="name">
        <select placeholder="loại sản phẩm" id="loai">
            <option value="Điện thoại">Điện thoại</option>
            <option value="máy tính">máy tính</option>
        </select>
        <!-- <input type="text" placeholder="loại sản phẩm" id="loai" > -->
        <input type="text" placeholder=" thêm hình ảnh " id="image">
        <input type="text" placeholder=" thêm giá " id="price">
        <input type="button" value="add" onclick="them_sp()"><br><br>
        <input type="text" placeholder=" tìm kiếm sản phẩm " id="timkiem">
        <input id="timkiem1" type="button" value="Tìm kiếm" onclick="tim_kiem();" />
        <h2 style="text-align: center "><b>DANH SÁCH SẢN PHẨM </b></h2>
        <table border="0px" style="width: 1600px;text-align:center">
            <tr>
                <td width='260px'><b>Tên sản phẩm</b></td>
                <td width='260px'><b>loại</b></td>
                <td width='260px'><b>Giá</b></td>
                <td width='260px'><b>Ảnh sản phẩm</b></td>
                <td width='260px'><b>Chỉnh sửa</b></td>
                <td width='260px'><b>xóa</b></td>
                <td width='260px'><b>lưu</b></td>
            </tr>
        </table>
        <div id="bang1"></div>
        <script>
            var product = [];
            var imageproduct = [];
            var priceproduct = [];
            var loaiproduct = [];
            var index;
            function ht_sp() {
                return location.reload();
            }
            var k
            function tim_kiem() {
                var timkk = product.includes(document.getElementById("timkiem").value);
                if (timkk) {

                    for (k = 0; k < product.length; k++) {

                        if (document.getElementById("timkiem").value == product[k]) {
                            let a;
                            a = "<table  border='0px' cellspacing='1' style='text-align:center' cellpadding='4' width='1600px'>";
                            a = a + "<tr>"
                            a += "<td  width='260px'>" + product[k] + "</td>"
                            a += "<td  width='260px'>" + loaiproduct[k] + "</td>"
                            a += '<td width="260px">' + priceproduct[k] + '</td>'
                            a += '<td width="260px"><img width="200px" height="200px" src=" ' + imageproduct[k] + '"></td>'
                            a += "<td  width='260px'> <input type='button' value='Edit' onclick='edit(" + i + ")' ></td>"
                            a += "<td  width='260px'> <input type='button' value='delete' onclick='deleted(" + i + ")'></td>"
                            a += "<td  width='260px'> <input type='button' value='Lưu' onclick='luu(" + i + ")'></td>"
                            a = a + "</tr>"

                            a = a + "</table>";
                            document.getElementById("bang1").innerHTML = a;
                            hienthisl(k + 1)

                        }
                    }
                } else if (document.getElementById("timkiem").value != product[k]) {
                    alert(
                        "Sản phẩm " +
                        "'" +
                        document.getElementById("timkiem").value +
                        "'" +
                        " không tồn tại trong danh sách"

                    );
                    bang(product);
                }
                else {
                    alert("Vui lòng nhập tên sản phẩm")
                    bang(product);
                }
            }
            var timkiem0 = document.getElementById("timkiem1");
            timkiem0.disabled = false;

            function them_sp() {
                let name = document.getElementById("name").value;
                if (name == '') {
                    alert('vui lòng nhập tên ')
                }
                let loai = document.getElementById("loai").value;
                if (loai == '') {
                    alert('vui lòng nhập loại sản phẩm ')
                }
                let image = document.getElementById("image").value;
                if (image == '') {
                    alert('vui lòng thêm ảnh ')
                }
                let price = document.getElementById("price").value;
                if (price == '') {
                    alert('vui lòng nhập giá ')
                }
                if (!image == '' && !loai == '' && !name == '' && !price == '') {
                    product.push(name);
                    imageproduct.push(image);
                    priceproduct.push(price);
                    loaiproduct.push(loai);
                    document.getElementById("name").value = "";
                    document.getElementById("loai").value = "";
                    document.getElementById("image").value = "";
                    document.getElementById("price").value = "";
                    bang(product);
                }
            }
            var a, i;
            function bang(product) {
                // let a, i;
                a = "<table  border='0px' cellspacing='1' style='text-align:center' cellpadding='4' width='1600px'>"
                for (i = 0; i < product.length; i++) {
                    a = a + "<tr>"
                    a += "<td  width='260px'>" + product[i] + "</td>"
                    a += "<td  width='260px'>" + loaiproduct[i] + "</td>"
                    a += '<td width="260px">' + priceproduct[i] + '</td>'
                    a += '<td width="260px"><img width="200px" height="200px" src=" ' + imageproduct[i] + '"></td>'
                    a += "<td  width='260px'> <input type='button' value='Edit' onclick='edit(" + i + ")' ></td>"
                    a += "<td  width='260px'> <input type='button' value='delete' onclick='deleted(" + i + ")'></td>"
                    a += "<td  width='260px'> <input type='button' value='Lưu' onclick='luu(" + i + ")'></td>"
                    a = a + "</tr>"
                }
                a = a + "</table>";
                document.getElementById("bang1").innerHTML = a;
                localStorage.setItem("product", JSON.stringify(product));
                localStorage.setItem("imageproduct", JSON.stringify(imageproduct));
                localStorage.setItem("priceproduct", JSON.stringify(priceproduct));
                localStorage.setItem("loaiproduct", JSON.stringify(loaiproduct));
                hienthisl(i)
            }
            function deleted(index) {
                var xacnhan = confirm("Bạn có muốn xóa sản phẩm " + product[index]);
                if (xacnhan) {
                    alert("Xóa sản phẩm " + product[index] + " thành công")
                    loaiproduct.splice(index, 1);
                    product.splice(index, 1);
                    imageproduct.splice(index, 1);
                    priceproduct.splice(index, 1);
                    bang(product);
                }
            }
            function edit(index) {

                let name = document.getElementById('name').value = product[index];
                let loai = document.getElementById('loai').value = product[index];
                let image = document.getElementById('image').value = imageproduct[index];
                let price = document.getElementById('price').value = priceproduct[index];
                bang(product);
            }
            function luu(index) {
                let name = document.getElementById('name').value;
                let loai = document.getElementById('loai').value;
                let image = document.getElementById('image').value;
                let price = document.getElementById('price').value;
                if (name == '') {
                    alert(' hay nhập tên')
                }
                if (loai == '') {
                    alert(' hay nhập loại')
                }
                if (image == '') {
                    alert(' hay nhập ảnh')
                } if (price == '') {
                    alert(' hay nhập giá')
                }
                if (name !== '' && loai !== '' && image !== '' && price !== '') {

                    product[index] = name;
                    loai[index] = loai;
                    imageproduct[index] = image;
                    priceproduct[index] = price;
                    document.getElementById('name').value = '';
                    document.getElementById('loai').value = '';
                    document.getElementById('image').value = '';
                    document.getElementById('price').value = '';
                    bang(product);

                }
            }
            var product = localStorage.getItem("product");
            if (!product) {
                product = [];
            } else {
                product = JSON.parse(product);
            }
            var imageproduct = localStorage.getItem("imageproduct");
            if (!imageproduct) {
                imageproduct = [];
            } else {
                imageproduct = JSON.parse(imageproduct);
            }
            var priceproduct = localStorage.getItem("priceproduct");
            if (!priceproduct) {
                priceproduct = [];
            } else {

                priceproduct = JSON.parse(priceproduct);
            }
            var loaiproduct = localStorage.getItem("loaiproduct");
            if (!loaiproduct) {
                loaiproduct = [];
            } else {

                loaiproduct = JSON.parse(loaiproduct);
            }
            bang(product);
            function hienthisl(h) {
                var sl = document.getElementById("soluong")
                if (h != null) {
                    if (h > 0) {
                        sl.innerHTML = 'Có ' + h + " Sản Phẩm"
                    } else {
                        sl.innerHTML = 'Không có Sản Phẩm'
                    }
                }
                // bang(product);
            }
        </script>
</body>

</html>